{
  "metadata": {
    "strategy_name": "OP_JAK_Optimized_Strategy",
    "created_from": "survey_mapping_20250925_145010.json",
    "created_at": "2025-09-25T15:00:00Z",
    "total_patterns": 6,
    "coverage": "44 pages mapped",
    "description": "Optimized filling strategies based on actual survey analysis"
  },

  "default_strategies": {
    "MATRIX_RATING_A6": {
      "pattern": "MATRIX_RATING",
      "rating_level": "A6",
      "selector_pattern": "input[type='radio'][id*='answer'][id$='-A6']",
      "auto_navigate": true,
      "navigation_delay": 3000,
      "description": "Fill matrix questions with 'Souhlasím' (A6)",
      "coverage": "12 pages",
      "keywords": ["uveďte", "prosím", "do jaké míry", "souhlasíte", "následujícími výroky"]
    },

    "MATRIX_RATING_A5": {
      "pattern": "MATRIX_RATING",
      "rating_level": "A5",
      "selector_pattern": "input[type='radio'][id*='answer'][id$='-A5']",
      "auto_navigate": true,
      "navigation_delay": 3000,
      "description": "Fill matrix questions with 'Spíše souhlasím' (A5)",
      "coverage": "2 pages",
      "keywords": ["kritického myšlení", "čtenářské gramotnosti"]
    },

    "RADIO_YES_NO_YES": {
      "pattern": "RADIO_CHOICE",
      "selected_answer": "Určitě ano",
      "selector_strategy": "find_radio_with_text",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select 'Určitě ano' for yes/no questions",
      "coverage": "3+ pages",
      "keywords": ["byl projekt", "došlo", "navštěvují"]
    },

    "RADIO_SIMPLE_YES": {
      "pattern": "RADIO_CHOICE",
      "selected_answer": "Ano",
      "selector_strategy": "find_radio_with_text",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select 'Ano' for simple yes/no questions",
      "coverage": "2+ pages",
      "keywords": ["realizovala vaše škola projekt"],
      "priority": 12
    },

    "RADIO_AGREEMENT_POSITIVE": {
      "pattern": "RADIO_CHOICE",
      "selected_answer": "Spíše souhlasíme",
      "selector_strategy": "find_radio_with_text",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select positive agreement for satisfaction questions",
      "coverage": "3+ pages",
      "keywords": ["souhlasíte s tvrzením", "bylo jednoduché"]
    },

    "CHECKBOX_SINGLE_SELECTION": {
      "pattern": "CHECKBOX_MULTI",
      "selected_indices": [2],
      "selector_strategy": "nth_checkbox",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select second checkbox option",
      "coverage": "2 pages",
      "keywords": ["využili jste pomoc"]
    },

    "INPUT_BIRTH_YEAR": {
      "pattern": "INPUT_FIELD",
      "input_value": "1985",
      "selector_pattern": "input[type='text'], input[type='number']",
      "auto_navigate": true,
      "navigation_delay": 1000,
      "description": "Fill birth year field",
      "coverage": "1 page",
      "keywords": ["rok svého narození", "vyplňte, prosím, rok"]
    },

    "INPUT_UKRAINIAN_PARTICIPANTS": {
      "pattern": "INPUT_FIELD",
      "input_value": "0",
      "selector_pattern": "input[type='text'], input[type='number']",
      "auto_navigate": true,
      "navigation_delay": 1000,
      "description": "Fill Ukrainian participants count with 0",
      "coverage": "1 page",
      "keywords": ["počet účastníků ve vzdělávání z ukrajiny", "účastníků ve vzdělávání z ukrajiny"],
      "priority": 25
    },

    "INPUT_POSITION": {
      "pattern": "RADIO_CHOICE",
      "selected_answer": "Externí firma nebo jiný externí pracovník pověřený k administraci žádosti/projektu",
      "selector_strategy": "find_radio_with_text",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select external position",
      "coverage": "1 page",
      "keywords": ["z jaké pozice vyplňujete tento dotazník", "vyplňujete tento dotazník", "z jaké pozice", "jaké pozice"],
      "priority": 15
    },

    "RADIO_EVALUATION_POSITIVE": {
      "pattern": "RADIO_CHOICE",
      "selected_answer": "Tento posun vítám",
      "selector_strategy": "find_radio_with_text",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select positive evaluation for OP JAK changes",
      "coverage": "1 page",
      "keywords": ["jak tento posun hodnotíte", "došlo k odlišnému pojetí"],
      "priority": 15
    },

    "RADIO_MEETING_TYPE": {
      "pattern": "RADIO_CHOICE",
      "selected_answer": "Oba druhy stejný přínos",
      "selector_strategy": "find_radio_with_text",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select equal benefit for meeting types",
      "coverage": "1 page",
      "keywords": ["který druh setkávání", "byl vyhodnocen jako nejpřínosnější"],
      "priority": 15
    },

    "RADIO_PARENT_PARTICIPATION": {
      "pattern": "RADIO_CHOICE",
      "selected_answer": "1 – 10 rodičů",
      "selector_strategy": "find_radio_with_text",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select 1-10 parents for participation question",
      "coverage": "1 page",
      "keywords": ["kolik rodičů se v průměru zapojilo", "zapojilo do jednoho odborně zaměřeného"],
      "priority": 20
    },

    "RADIO_PROBLEMS_NO": {
      "pattern": "RADIO_CHOICE",
      "selected_answer": "Ne",
      "selector_strategy": "find_radio_with_text",
      "auto_navigate": true,
      "navigation_delay": 2000,
      "description": "Select No for problems/complications question",
      "coverage": "1 page",
      "keywords": ["setkali jste se s nějakými problémy", "problémy/komplikacemi v"],
      "priority": 20
    }
  },

  "special_cases": {
    "barrier_free_exception": {
      "page_patterns": ["v oblasti inkluze"],
      "exception_rules": [{
        "text_contains": ["bezbariérová", "zpřístupnění školy", "přizpůsobení a vybavení učeben"],
        "action": "click_A1",
        "selector_pattern": "input[type='radio'][id$='-A1']",
        "description": "Barrier-free row: select A1 (Rozhodně nesouhlasím)",
        "javascript": "var row = Array.from(document.querySelectorAll('tr, .answer-item')).find(r => r.textContent.includes('bezbariérová')); if(row) { var a1 = row.querySelector('input[type=\"radio\"][id$=\"-A1\"]'); if(a1) a1.click(); }"
      }],
      "default_strategy": {
        "pattern": "MATRIX_RATING",
        "rating_level": "A6",
        "description": "All other inclusion questions: A6 (Souhlasím)"
      }
    },

    "romsti_zaci_nevim": {
      "page_patterns": ["romští žáci", "romské děti", "romští účastníci ve vzdělávání"],
      "strategy": {
        "pattern": "RADIO_CHOICE",
        "selected_answer": "Nevím",
        "description": "Special case: Roma students/participants question"
      }
    },

    "final_page": {
      "page_patterns": ["dostali jste se na konec", "odeslat", "dokončení"],
      "strategy": {
        "pattern": "FINAL_PAGE",
        "auto_navigate": false,
        "confirmation_required": true,
        "description": "Final submission page"
      }
    },

    "welcome_skip": {
      "page_patterns": ["výstupní evaluační dotazník", "úvod", "vítejte"],
      "strategy": {
        "pattern": "SKIP",
        "auto_navigate": true,
        "description": "Skip welcome/intro pages"
      }
    }
  },

  "fuzzy_matching": {
    "enabled": true,
    "similarity_threshold": 0.75,
    "keyword_matching": true,
    "fallback_strategy": "MATRIX_RATING_A6"
  },

  "filling_algorithm": {
    "priority_order": [
      "exact_page_match",
      "keyword_pattern_match",
      "fuzzy_similarity_match",
      "default_fallback"
    ],
    "javascript_templates": {
      "matrix_filler": "var radios = document.querySelectorAll('{selector_pattern}'); radios.forEach(r => r.click());",
      "radio_filler": "var radio = Array.from(document.querySelectorAll('input[type=\"radio\"]')).find(r => r.parentElement.textContent.includes('{selected_answer}')); if(radio) radio.click();",
      "checkbox_filler": "var checkboxes = document.querySelectorAll('input[type=\"checkbox\"]'); {selected_indices}.forEach(i => checkboxes[i-1]?.click());",
      "input_filler": "var input = document.querySelector('{selector_pattern}'); if(input) input.value = '{input_value}';"
    },
    "navigation_script": "setTimeout(() => document.querySelector('#ls-button-submit')?.click(), {navigation_delay});"
  },

  "performance_stats": {
    "total_pages_covered": 44,
    "patterns_identified": 6,
    "optimization_ratio": "6 strategies cover 44 pages (7.3x reduction)",
    "expected_success_rate": "95%+",
    "automation_time": "~5-10 minutes for full survey"
  }
}